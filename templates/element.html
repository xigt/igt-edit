
<div id="all-elements">
    {# Iterate over every igt in the page... #}
    {% for igt in xigt %}
    <div id="{{ igt.id }}" class="igt-panel">

    {# RAW TIER... #}
    <div class="raw-tier">
    <H2>Raw Tier</H2>
        <TABLE class="rawtable">
            {% for item in igt.raw_tier() %}
                <TR class="textrow">
                    <TD class="short-col"><pre></pre></TD>
                    <TD class="short-col"><pre class="tags">{{item.attributes.get('tag')}}</pre></TD>
                    <TD><pre class="text">{{ item.text }}</pre></TD>
                </TR>
            {% endfor %}
        </TABLE>
    </div>

    {# Show normalized tier button #}
    <input type="button" value="Show Clean Tier" onclick="$('#clean-tier').show(); $(this).hide();"/>
    <HR/>

    {# AUTO-CLEANED TIER #}
    <div id="clean-tier" style="display:none;">
        <H2>Clean Tier</H2>
        <TABLE class="cleantable">
            {% for item in igt.clean_tier(merge=True) %}
                <TR id="{{ item.igt.id }}-{{ item.id }}" class="textrow cleanrow">
                    <TD class="short-col">
                        <img class="hovericon undo" src="static/images/undo.png" onclick="restoreItem('{{ item.igt.id }}-{{ item.id }}')"/>
                        <img class="hovericon delete" src="static/images/delete.png" onclick="deleteItem($(this), '{{ item.igt.id }}-{{ item.id}}')"/>
                        <img class="hovericon add" src="static/images/add.png" onclick="addItem('c', $(this).closest('tr'), 'cleanrow')" />
                    </TD>

                    {# COLUMN WITH TAGS #}
                    <TD class="short-col">
                        <input class="tag-input" type="text" value="{{ item.attributes.get('tag') }}"/>
                    </TD>

                    {# COLUMN WITH CLEAN TEXT #}
                    <TD class="textinput">
                        <input id="{{ item.id }}" class="line-input" type="text" value="{{ item.text }}"/>
                    </TD>

                </TR>
            {% endfor %}
            {# Include an "ADD" button #}
        </TABLE>
        <BR/>
        <input value="Generate Normalized Tier"
               class="button" type="button" onclick="normalizeIGT('{{ corp_id }}','{{ igt.id }}');$(this).val('Regenerate Normalized Tier');"
        />
    </div>
    {# END AUTO-CLEANED TIER #}





        <div id="normalized-tier" style="display:none;clear:both">
            <HR/>
            <H2>Normalized Tier</H2>
            <div id="normalized-contents">

            </div>
            {# Calculate normalized #}
            <input type="button"
                   value="Analyze Normalized Tier"
                   onclick="generateFromNormalized('{{ corp_id }}','{{ igt.id }}')" />

            <input type="button"
                   value="Save Edited Tiers"
                   onclick="saveTier()"/>

            <span id="save-msg"></span>

            <div id="analysis">
                <span id="glw" class="feedback">GLW</span>
                <span id="glm" class="feedback">GLM</span>
                <span id="tag" class="feedback">TAG</span>
                <span id="col" class="feedback">COL</span>
            </div>
            <div style="clear:both"/>
        </div>

        {# BEGIN RATING BUTTONS #}
        <div id="rating-button-container">
            <div id="rating-buttons">
                <img id="rating-green"  class="rating-button" src="static/images/smiley-green.png" title="Good rating"/>
                <img id="rating-yellow" class="rating-button " src="static/images/smiley-yellow.png"/>
                <img id="rating-red"    class="rating-button" src="static/images/smiley-red.png"/>
            </div>
        </div>


        {# REMAINING TIERS / VISUALIZATIONS #}
        <div id="remaining-tiers">
            <div id="remaining-content">

            </div>
        </div>

    </div>

{% endfor %}

</div>
