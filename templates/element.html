
<div id="all-elements">
    {# Iterate over every igt in the page... #}
    {% for igt in xigt %}
    <div id="{{ igt.id }}" class="igt-panel">

    {# RAW TIER... #}
    <div class="raw-tier">
    <H2>Raw Tier</H2>
        <TABLE class="rawtable">
            {% for item in igt.raw_tier() %}
                <TR class="textrow">
                    <TD class="short-col"><pre></pre></TD>
                    <TD class="short-col"><pre class="tags">{{item.attributes.get('tag')}}</pre></TD>
                    <TD><pre class="text">{{ item.text }}</pre></TD>
                </TR>
            {% endfor %}
        </TABLE>
    </div>
    <HR/>

    {# AUTO-CLEANED TIER #}
    <H2>Clean Tier</H2>
        <TABLE class="cleantable">
            {% for item in igt.clean_tier(merge=True) %}
                <TR id="{{ item.igt.id }}-{{ item.id }}" class="textrow cleanrow">
                    <TD class="short-col">
                        <img class="hovericon undo" src="static/images/undo.png" onclick="restoreItem('#{{ item.igt.id }}-{{ item.id }}')"/>
                        <img class="hovericon delete" src="static/images/delete.png" onclick="deleteItem('#{{ item.igt.id }}-{{ item.id}}')"/>
                        <img class="hovericon add" src="static/images/add.png" onclick="addItem('c', $(this).closest('tr'), 'cleanrow')" />
                    </TD>

                    {# COLUMN WITH TAGS #}
                    <TD class="short-col">
                        <input class="tag-input" type="text" value="{{ item.attributes.get('tag') }}"/>
                    </TD>

                    {# COLUMN WITH CLEAN TEXT #}
                    <TD class="textinput">
                        <input id="{{ item.id }}" class="line-input" type="text" value="{{ item.text }}"/>
                    </TD>

                </TR>
            {% endfor %}
            {# Include an "ADD" button #}
        </TABLE> <BR/>

        {# END AUTO-CLEANED TIER #}

        <input value="Submit Clean Tier"
               class="button" type="button" onclick="normalizeIGT('{{ corp_id }}','{{ igt.id }}')"
        />


        <div id="normalized-tier" style="display:none;clear:both">
            <HR/>
            <H2>Normalized Tier</H2>
            <div id="normalized-contents">

            </div>
            {# Calculate normalized #}
            <input type="button"
                   value="Analyze Alignment"
                   onclick="generateFromNormalized('{{ corp_id }}','{{ igt.id }}')" />

            <div id="analysis">
                <span id="glw" class="feedback">GLW</span>
                <span id="glm" class="feedback">GLM</span>
                <span id="tag" class="feedback">TAG</span>
            </div>
            <div style="clear:both"/>
        </div>




        <div id="remaining-tiers">
            <div id="remaining-content">

            </div>
        </div>

    </div>

{% endfor %}

</div>
