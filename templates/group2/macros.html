{# This template file will be used to display a POS tag tier, with
   editable dropdowns. #}
{% macro pos_tier(tier) %}
    {% for item in tier %}
        <TD>
        <SELECT id="{{ item.id }}">
            {% for tag in config['POS_TAGS'] %}
                <option value="{{ tag }}"
                        {% if tag == item.value() %}
                            selected
                        {% endif %}
                >{{ tag }}</option>
            {% endfor %}
        </SELECT>
        </TD>
    {% endfor %}
{% endmacro %}

{# Display the words for a words tier. #}
{% macro words(word_tier) %}
    {% for w in word_tier %}
        <TD id="{{ w.id }}" class="alignable-word"
            onmouseenter="highlight(this);"
            onmouseleave="unhighlight(this);"
            onclick="startAlign(this);"
            style="border:solid white"
        >
            {{ w.value() }}
        </TD>
    {% endfor %}
{% endmacro %}

{% macro morph_dict_json(word_morph_dict) %}
    {% set outer_comma = joiner(', ') %}
    {% raw %} { {% endraw %}
    {% for word in word_morph_dict.keys() %}
        {% set inner_comma = joiner(',') %}
        {{ outer_comma()}}"{{ word.id }}":[
            {% for morph in word_morph_dict[word] %}
                {{ inner_comma() }}"{{ morph.id }}"
            {% endfor %} ]
    {% endfor %}
    {% raw %} } {% endraw %}
{% endmacro %}

{% macro morphs(word_morph_dict) %}
    {% for word, morphs in word_morph_dict.items() %}
        <TD id="morphs-{{ word.id }}">
        <TABLE><TR>
        {% for morph in morphs %}
            <TD id="{{ morph.id }}" parentWord="{{ word.id }}"
                onmouseenter="highlight(this);"
                onmouseleave="unhighlight(this);">
            {{ morph.value() }}
            </TD>
        {% endfor %}
        </TR></TABLE>
        </TD>
    {% endfor %}
{% endmacro %}

{% macro aln_json(aln_pairs, src_prefix, tgt_prefix) %}
    {% set comma = joiner(',') %}
    [
        {% for src, tgt in aln_pairs %}
            {{ comma() }}["{{ src_prefix }}{{ src }}","{{ tgt_prefix }}{{ tgt }}"]
        {% endfor %}
    ]
{% endmacro %}